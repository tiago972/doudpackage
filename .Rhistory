dplyr::count(vivant.s4)[1,1]
a<-bdd %>%
dplyr::count(vivant.s4)
a
a[1]
a[2,1]
a[2]
a[2, 1]
a[2, 2]
a[2, 3]
a[2[1]]
a[2[1[1]]]
a[2[1[2]]]
a[2[1]]
a[2]
a[2][1]
as.data.frame(a)
as.data.frame(a)[2,1]
as.data.frame(a)[2,]
as.data.frame(a)[2,2]
a[2,2]
a[1,2]
a[3,2]
setwd("/Users/Tiago/Downloads")
library(dplyr)
### Infection ###
UGA<-read.csv2("Infections/Infections UGA.csv")
SSR_ortho<-read.csv2("Infections/Infection SSR ortho.csv")
SSR_polypatho<-read.csv2("Infections/Infections SSR polypatho (no covid).csv")
SSR_polypatho.covid<-read.csv2("Infections/Infection SSR polypatho covid.csv")
extractions<-rbind(UGA, SSR_ortho, SSR_polypatho, SSR_polypatho.covid)
extractions<-extractions[,c("ipp", "date_debut_visite", "code_unite_responsabilite")]
summary(as.factor(extractions$ipp))
View(extractions)
write.csv2(extractions, "infections.csv")
setwd("/Users/Tiago/Desktop/BF is cool/Anne Laure")
library(lubridate)
library(doudpackage)
bdd<-read.csv2("dma.csv", na.strings = '')
bdd<-bdd[,-c(2:6, 8:11)]
bdd<-bdd[,!colnames(bdd) %in% c("SqlPatientId","PatientId", "PatientAnneeNaissance",
"PatientCodeCommune", "PatientProfession", "ActeId", "DclDateActe",
"DclPRType", "DclPRVisite", "ActeEnvoye", "PatientDateDeces")]
summary(bdd)
for (i in 1:ncol(bdd))
{
col_name<-colnames(bdd)[i]
if (grepl(".*date.*", col_name , ignore.case = T))
bdd[,i]<-as.Date(as.character(bdd[,i]), tryFormats = c("%d/%m/%Y"))
if (is.character(bdd[,i]))
{
bdd[,i]<-as.factor(bdd[,i])
if (nlevels(bdd[,i]) > 15)
bdd[,i]<-as.character(bdd[,i])
}
}
bdd[,"PatientCodeDepartement"]<-as.factor(bdd[,"PatientCodeDepartement"])
bdd$DclDiagnostic31<-as.factor(bdd$DclDiagnostic31)
bdd$DclDiagnostic32<-as.factor(bdd$DclDiagnostic32)
bdd$DclDiagnostic33<-as.factor(bdd$DclDiagnostic33)
summary(bdd)
bdd[,"foreigner"]<-as.factor(ifelse(is.na(bdd[,"PatientCodeDepartement"]), NA,
ifelse(bdd[,"PatientCodeDepartement"] == "99", "1", "0")))
setwd("/Users/Tiago/Desktop/BF is cool/Anne Laure")
library(lubridate)
library(doudpackage)
bdd<-read.csv2("dma.csv", na.strings = '')
bdd<-bdd[,-c(2:6, 8:11)]
bdd<-bdd[,!colnames(bdd) %in% c("SqlPatientId","PatientId", "PatientAnneeNaissance",
"PatientCodeCommune", "PatientProfession", "ActeId", "DclDateActe",
"DclPRType", "DclPRVisite", "ActeEnvoye", "PatientDateDeces")]
summary(bdd)
for (i in 1:ncol(bdd))
{
col_name<-colnames(bdd)[i]
if (grepl(".*date.*", col_name , ignore.case = T))
bdd[,i]<-as.Date(as.character(bdd[,i]), tryFormats = c("%d/%m/%Y"))
if (is.character(bdd[,i]))
{
bdd[,i]<-as.factor(bdd[,i])
if (nlevels(bdd[,i]) > 15)
bdd[,i]<-as.character(bdd[,i])
}
}
bdd[,"PatientCodeDepartement"]<-as.factor(bdd[,"PatientCodeDepartement"])
bdd$DclDiagnostic31<-as.factor(bdd$DclDiagnostic31)
bdd$DclDiagnostic32<-as.factor(bdd$DclDiagnostic32)
bdd$DclDiagnostic33<-as.factor(bdd$DclDiagnostic33)
summary(bdd)
bdd[,"foreigner"]<-as.factor(ifelse(is.na(bdd[,"PatientCodeDepartement"]), NA,
ifelse(bdd[,"PatientCodeDepartement"] == "99", "1", "0")))
bdd<-bdd[,!colnames(bdd) %in% c("PatientCodeDepartement")]
View(bdd)
setwd("/Users/Tiago/Desktop/BF\ is\ cool/doudpackage/R")
source('./ft_quali.R')
source('./ft_quanti.R')
source('./tools.R')
source('./ft_ana_biv.R')
source('./ft_quanti.R')
source('./ft_univ_tab.R')
source('./ft_parse.R')
setwd("/Users/Tiago/Desktop/BF\ is\ cool/nagisa")
source('./nagisa.R')
# library(doudpackage)
test3<-ft_desc_tab(bdd, na.print = T, p.value = T,group = "vivant.s4")
iris3 <- iris[c(1:2, 51:54, 101:103), ]
kable(iris3[, 1:4], booktabs = TRUE) %>%
pack_rows(index = c("setosa" = 2, "versicolor" = 4, "virginica" = 3)
)
################ Test pour htmlTable ######
library(kableExtra)
iris3 <- iris[c(1:2, 51:54, 101:103), ]
kable(iris3[, 1:4], booktabs = TRUE) %>%
pack_rows(index = c("setosa" = 2, "versicolor" = 4, "virginica" = 3)
)
### Tests de mini fonctions
apply_test<-apply(bdd, 2, is.factor)
apply_test
### Tests de mini fonctions
apply_test<-apply(bdd, 2, function(x) if(is.factor(x)) return(x))
### Tests de mini fonctions
apply_test<-apply(bdd, 2, function(x){
if(is.factor(x))
return(x)
else
return("fuck")})
apply_test
### Tests de mini fonctions
apply(bdd, 2, function(x){
print(x)
})
print(x)
### Tests de mini fonctions
apply(bdd, 2, function(x){
print(x)
})
bdd[,"1"]
bdd[,1]
### Tests de mini fonctions
apply(bdd, 2, function(x){
print(colnames(x))
})
### Tests de mini fonctions
apply(bdd, 2, function(x){
print(names(x))
})
### Tests de mini fonctions
col_names<-colnames(bdd)
sapply(col_names,function(x){
if (is.factor(bdd[,col_names]))
return(col_names)
else
return("Non")
})
sapply(col_names,function(x){
if (is.factor(bdd[,col_names]))
return(col_names)
})
lapply(col_names,function(x){
if (is.factor(bdd[,col_names]))
return(col_names)
})
sapply(col_names, function(x){
if (is.factor(bdd[,x]))
return(col_names)
})
sapply(col_names, function(x){
if (is.factor(bdd[,x]))
return(x)
})
sapply(col_names, function(x){
if (is.factor(bdd[,x]))
return(x)
})
apply_test<-sapply(col_names, function(x){
if (is.factor(bdd[,x]))
return(x)
})
apply_test[[1]]
apply_test<-unlist(apply_test)
# BDD pour les tests, petit echantillon de var quali
bdd_tmp<-bdd[,apply_test[1:5]]
# BDD pour les tests, petit echantillon de var quali
bdd_tmp<-bdd[,c(apply_test[1:5], "vivant.s4")]
test<-ft_desc_tab(bdd_tmp, na.print = T, group = "vivant.s4")
test<-ft_desc_tab(bdd_tmp, na.print = T,quali = T, complete = F,group = "vivant.s4")
test
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = "Genre" = 2)
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2))
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2)) %>%
pack_rows(index = "Var démo" = 8)
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2)) %>%
pack_rows(index = c("Var démo" = 8))
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Var démo" = 8))  %>%
pack_rows(index = c("Genre" = 2))
res
?pack_rows
test<-ft_desc_tab(bdd_tmp, na.print = T,quali = T, complete = F,group = "vivant.s4")
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2))
res
?ident
?add_indent
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2)) %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2)) %>%
add_indent(1, level_of_indent = 0.5)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2)) %>%
add_indent(1, level_of_indent = 2)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2)) %>%
add_indent(1, level_of_indent = 5)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
add_indent(1, level_of_indent = 5)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F) %>%
add_indent(1, level_of_indent = 2)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F) %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F) %>%
add_indent(1, level_of_indent = 0.5)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")
)
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 3px solid;") %>%
add_indent(1, level_of_indent = 0.5)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 50%;") %>%
add_indent(1, level_of_indent = 0.5)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 1px;") %>%
add_indent(1, level_of_indent = 0.5)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 5px;") %>%
add_indent(1, level_of_indent = 0.5)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 5px;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 10%;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 8%;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 5%;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 3mm;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 10mm;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 10px;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 15px;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 20px;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 30px;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 10px;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 15%;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 10%;") %>%
add_indent(1, level_of_indent = 1)
res
test<-ft_desc_tab(bdd_tmp, na.print = T,quali = T, complete = F,group = "vivant.s4")
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 8%;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 7%;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 6%;") %>%
add_indent(1, level_of_indent = 1)
res
res<-kableExtra::kable(test) %>%
kableExtra::kable_classic() %>%
kableExtra::add_header_above(c(" ", "Total" = 1, setNames(1, "group.name[1]"),
setNames(1, "group.name[2]"), " ")) %>%
pack_rows(index = c("Genre" = 2), indent = F, label_row_css = "border-bottom: 1px solid;
text-indent: 4%;") %>%
add_indent(1, level_of_indent = 1)
res
length(grepl(apply_test[1], test))
grepl(apply_test[1], test$var)
grepl(apply_test[1], test$var)["TRUE"]
tabl(grepl(apply_test[1], test$var))["TRUE"]
table(grepl(apply_test[1], test$var))["TRUE"]
table(grepl(apply_test[1], test$var))["TRUE"] == 1
table(grepl(apply_test[1], test$var))["TRUE"] == 2
table(grepl(apply_test[1], test$var))["TRUE"] > 2
table(grepl(apply_test[1], test$var))["TRUE"] > 1
table(grepl("test", test$var))["TRUE"] > 1
table(grepl("test", test$var))["TRUE"]
is.null(table(grepl("test", test$var))["TRUE"])
is_empty(table(grepl("test", test$var))["TRUE"])
is.na(table(grepl("test", test$var))["TRUE"])
test_list<-list(c("Groupe 1" = c("Genre", "Lieu.S4"),
("Group 2" = c("Mode.de.sortie", "Mode.de.vie"))))
test_list
test_list<-list("Groupe 1" = c("Genre", "Lieu.S4"),
("Group 2" = c("Mode.de.sortie", "Mode.de.vie")))
test_list
test_list<-list("Groupe 1" = c("Genre", "Lieu.S4"),
"Group 2" = c("Mode.de.sortie", "Mode.de.vie"))
test_list
test_list<-list(Groupe.1 = c("Genre", "Lieu.S4"),
Group.2 = c("Mode.de.sortie", "Mode.de.vie"))
test_list
length(test_list[[1]])
test_list[[1]][1]
test_list[[1]]
c(test_list[[1]], test_list[[2]])
unlist(test)
unlist(test_list)
bdd_test<-bdd[,unlist(test_list)]
View(bdd_test)
bdd_test<-rbdin(bdd_test, bdd[,!names(bdd) %in% unlist(test_list)])
bdd_test<-cbdind(bdd_test, bdd[,!names(bdd) %in% unlist(test_list)])
bdd_test<-cbind(bdd_test, bdd[,!names(bdd) %in% unlist(test_list)])
View(bdd_test)
setwd("/Users/Tiago/Desktop/BF\ is\ cool/doudpackage/R")
source('./ft_quali.R')
source('./ft_quanti.R')
source('./tools.R')
source('./ft_ana_biv.R')
source('./ft_quanti.R')
source('./ft_univ_tab.R')
source('./ft_parse.R')
setwd("/Users/Tiago/Desktop/BF\ is\ cool/nagisa")
detach("doudpackage")
?detach
detach("doudpackage", unload = T)
