View(res_fin)
res_fin<-cbind(res_fin, ic)
View(res_fin)
ic<-as.data.frame(apply(ic, 2, exp))
res_fin<-cbind(res_fin, ic)
View(res_fin)
rm(res_fin)
res_fin<-as.data.frame(apply(boot_coef_mean, 1, exp))
res_fin<-cbind(res_fin, ic)
View(res_fin)
exp(confint(reg))
t.test(boot_coef$Age..ans.)
exp(0.03092888)
exp(0.02957208)
t.test(boot_coef$eosinopenie_pnn)
exp(2.711914)
setwd("/Users/Tiago/Desktop/BF is cool/Jill")
# library(doudpackage)
library(tidyverse)
library(lubridate)
bdd<-read.csv2("bdd_jill.csv")
summary(bdd)
for (i  in 1:ncol(bdd)){
if(is.character(bdd[,i])){
print(paste("to factor: ", colnames(bdd)[i]))
bdd[,i]<-as.factor(bdd[,i])}
if (nlevels(bdd[,i]) >= 30){
print(paste("to Date: ", colnames(bdd)[i]))
bdd[,i]<-as.Date(bdd[,i], "%d/%m/%Y")}
if (is.numeric(bdd[,i]) && mean(bdd[,i], na.rm = TRUE) <= 3)
{
print(paste("to factor: ", colnames(bdd)[i]))
bdd[,i]<-as.factor(as.character(bdd[,i]))
}
}
summary(bdd)
levels(bdd$BPCO)[levels(bdd$BPCO)=="?"]<-NA
levels(bdd$BPCO)[levels(bdd$BPCO)==""]<-NA
levels(bdd$Alcool..0.1.)[levels(bdd$Alcool..0.1.)=="?"]<-NA
levels(bdd$Tabac..PA.)[levels(bdd$Tabac..PA.)==""]<-NA
levels(bdd$Tabac..PA.)[levels(bdd$Tabac..PA.)=="?"]<-NA
levels(bdd$Anosmie..0.1.)[levels(bdd$Anosmie..0.1.)=="?"]<-NA
levels(bdd$Agueusie..0.1.)[levels(bdd$Agueusie..0.1.)=="?"]<-NA
colnames(bdd)
bdd_subset<-select(bdd, Date.d.entrée.UGA..JJ.MM.AA., Date.sortie.UGA..JJ.MM.AA., Age..ans., sexe.0.f.1.h,
Prov.autre.service..type.service.SAU..etc..., Alcool..0.1., Tabac..PA., Chutes.répétition...0.1., Poids..Kg.,
IMC, Charlson.pondéré, ADL6, institution..0.1., Nbe.total.de.molécules, Nosocomial..0.1.,
Type.imagerie..TDM..0.Radio.1., Anomalie.imagerie..0.1., ACFA.parox...0.1., SCA..0.1., OAP..0.1.,
T.vigilance..Glagow...14...0.1., MTEV..0.1.,  Hémorragie..0.1., Transfusion..0.1.,
IRénaleA..0.1., "Fécalome..0.1.", Escarre..0.1., Globe..0.1.,
qSOFA.Max, Antibiothérapie.initiale, Leuco.MAX, Leuco.min, PNN.MAX, PNN.min,
PNE.Max, PNE.Min, Lympho.Max, Lympho.Min, Hb.MAX, Hb.min,
Plqt.MAX, Plqt.min, Cytolyse..0.1., Cholestase..0.1.,
DMS.UGA.covid, décès..0.1., RAD, SSR, Autre..hors.décès.)
summary(bdd_subset)
bdd_subset$ADL6<-as.character(bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("0,5", "0.5", bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("0;5", "0.5", bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("1,5", "1.5", bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("2,5", "2.5", bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("3,5", "3.5", bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("4,5", "4.5", bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("5,5", "5.5", bdd_subset$ADL6)
bdd_subset$ADL6<-as.factor(bdd_subset$ADL6)
levels(bdd_subset$ADL6)[1]<-NA
summary(bdd_subset$ADL6)
bdd_subset$Tabac..PA.<-as.numeric(bdd_subset$Tabac..PA.)
bdd_subset$Prov.autre.service..type.service.SAU..etc...<-as.factor(bdd_subset$Prov.autre.service..type.service.SAU..etc...)
summary(bdd_subset)
## A preciser en commentaire que j ai considere les vides commes 0 ###
levels(bdd_subset$Antibiothérapie.initiale)[1]<-0
bdd_subset$Antibiothérapie.initiale<-as.character(bdd_subset$Antibiothérapie.initiale)
bdd_subset$Antibiothérapie.initiale<-ifelse(bdd_subset$Antibiothérapie.initiale!="0", "1", bdd_subset$Antibiothérapie.initiale)
bdd_subset$Antibiothérapie.initiale<-as.factor(bdd_subset$Antibiothérapie.initiale)
bdd_subset$devenir<-as.factor(ifelse(bdd_subset$décès..0.1.==1, 1,
ifelse(bdd_subset$RAD==1, 1,
ifelse(bdd_subset$SSR==1, 1, as.character(bdd_subset$Autre..hors.décès.)))))
for (i in 1:ncol(bdd_subset))
{
if (is.factor(bdd_subset[,i]))
print(paste(colnames(bdd_subset)[i], "facteur i= ", i))
else if (is.numeric(bdd_subset[,i]))
print(paste(colnames(bdd_subset)[i], "numeric i= ", i))
else
print(paste(colnames(bdd_subset)[i], "a determiner i= ", i))
}
bdd_subset$PNE.Max<-as.numeric(as.character(bdd_subset$PNE.Max))
bdd_subset$PNE.Min<-as.numeric(as.character(bdd_subset$PNE.Min))
bdd_subset$Lympho.Max<-as.numeric(as.character(bdd_subset$Lympho.Max))
bdd_subset$Lympho.Min<-as.numeric(as.character(bdd_subset$Lympho.Min))
summary(bdd_subset$PNE.Min)
summary(bdd_subset$PNE.Max)
table(bdd_subset$PNE.Min<0.2)
summary(bdd_subset$Leuco.MAX)
summary(bdd_subset$Lympho.Min)
summary(bdd_subset$PNN.MAX)
bdd_subset$eosinopenie_pnn<-as.factor(ifelse(bdd_subset$PNE.Min < 0.5 & bdd_subset$PNN.MAX > 7, 1,
ifelse(is.na(bdd_subset$PNN.MAX)|is.na(bdd_subset$PNE.Min), NA, 0)))
bdd_subset$ADL6<-as.numeric(as.character(bdd_subset$ADL6))
### Analyse unvariee ###
ana_biv<-ft_ana_biv(bdd_subset, "décès..0.1.")
## Regression ###
colnames(bdd_subset)
summary(bdd_subset$décès..0.1.)
### Determination des seuils pour ADL & charlson
library(DescTools)
summary(bdd_subset$ADL6)
bdd_subset$ADL6_quali1<-as.factor(ifelse(bdd_subset$ADL6<=3, 0, 1))
reg_adl1<-glm(bdd_subset$décès..0.1.~bdd_subset$ADL6_quali1, family = "binomial")
bdd_subset$ADL6_quali2<-as.factor(ifelse(bdd_subset$ADL6<=2, 0, 1))
reg_adl2<-glm(bdd_subset$décès..0.1.~bdd_subset$ADL6_quali2, family = "binomial")
Cstat(x= predict(reg_adl1, type="response"),
resp = model.response((model.frame(reg_adl1))))
Cstat(x= predict(reg_adl2, type="response"),
resp = model.response((model.frame(reg_adl2))))
# Choix sur <=2
summary(bdd_subset$Charlson.pondéré)
bdd_subset$charlson_quali1<-as.factor(ifelse(bdd_subset$Charlson.pondéré<=4, 0, 1))
bdd_subset$charlson_quali2<-as.factor(ifelse(bdd_subset$Charlson.pondéré<=5, 0, 1))
reg_charlson1<-glm(bdd_subset$décès..0.1.~bdd_subset$charlson_quali1, family = "binomial")
reg_charlson2<-glm(bdd_subset$décès..0.1.~bdd_subset$charlson_quali2, family = "binomial")
Cstat(x= predict(reg_charlson1, type="response"),
resp = model.response((model.frame(reg_charlson1))))
Cstat(x= predict(reg_charlson2, type="response"),
resp = model.response((model.frame(reg_charlson2))))
#Choix sur <=5
bdd_reg<-select(bdd_subset, Age..ans., sexe.0.f.1.h,
eosinopenie_pnn,charlson_quali2, ADL6_quali2,Antibiothérapie.initiale, décès..0.1.)
bdd_reg<-bdd_reg[complete.cases(bdd_reg),]
summary(bdd_reg$décès..0.1.)
library(boot)
reg <- glm(décès..0.1.~Age..ans.+sexe.0.f.1.h+eosinopenie_pnn+charlson_quali2+ADL6_quali2+
Antibiothérapie.initiale, family = "binomial", data=bdd_subset)
summary(reg)
exp(coef(reg))
exp(confint(reg))
func = function(Data,ind){
my_env<-environment()
tryCatch(
{
fit = glm(décès..0.1.~Age..ans.+sexe.0.f.1.h+eosinopenie_pnn+charlson_quali2+ADL6_quali2+
Antibiothérapie.initiale, family = "binomial", data=bdd_reg[ind,])$coefficients
},
warning=function(w){
my_env$fit = 0
},
finally = {
c(fit)
})
}
reg_boot = boot(bdd_reg,func,R=9999)
boot_coef<-as.data.frame(reg_boot$t)
boot_coef
boot_coef<-filter(boot_coef, V1!=0)
boot_coef
colnames(boot_coef)<-c("Intercept", "Age..ans.", "sexe.0.f.1.h", "eosinopenie_pnn", "charlson_quali2", "ADL6_quali2",
"Antibiothérapie.initiale")
summary(boot_coef)
ic<-as.data.frame(t(as.data.frame(apply(boot_coef, 2, quantile, probs = seq(0,1,0.025)))))
ic<-select(ic, "2.5%", "97.5%")
ic<-as.data.frame(apply(ic, 2, exp))
boot_coef_mean<-as.data.frame(apply(boot_coef, 2, mean))
boot_coef_mean
res_fin<-as.data.frame(apply(boot_coef_mean, 1, exp))
res_fin<-cbind(res_fin, ic)
View(res_fin)
exp(confint(reg))
#### Test IC
func_ic = function(Data,ind){
my_env<-environment()
fit = glm(décès..0.1.~Age..ans.+sexe.0.f.1.h+eosinopenie_pnn+charlson_quali2+ADL6_quali2+
Antibiothérapie.initiale, family = "binomial", data=bdd_reg[ind,])
c(confint(fit))
}
reg_boot = boot(bdd_reg,func,R=9999)
apply(reg_boot, 2, mean)
apply(reg_boot$t, 2, mean)
reg_boot
reg_boot$t
#### Test IC
func_ic = function(Data,ind){
my_env<-environment()
fit = glm(décès..0.1.~Age..ans.+sexe.0.f.1.h+eosinopenie_pnn+charlson_quali2+ADL6_quali2+
Antibiothérapie.initiale, family = "binomial", data=bdd_reg[ind,])
c(exp(confint(fit)))
}
#### Test IC
func_ic = function(Data,ind){
my_env<-environment()
fit = glm(décès..0.1.~Age..ans.+sexe.0.f.1.h+eosinopenie_pnn+charlson_quali2+ADL6_quali2+
Antibiothérapie.initiale, family = "binomial", data=bdd_reg[ind,])
c(exp(confint(fit)))
}
reg_ic = boot(bdd_reg,func_ic,R=9999)
library(boot)
reg <- glm(décès..0.1.~Age..ans.+sexe.0.f.1.h+eosinopenie_pnn+charlson_quali2+ADL6_quali2+
Antibiothérapie.initiale, family = "binomial", data=bdd_subset)
summary(reg)
exp(coef(reg))
exp(confint(reg))
func = function(Data,ind){
my_env<-environment()
tryCatch(
{
fit = glm(décès..0.1.~Age..ans.+sexe.0.f.1.h+eosinopenie_pnn+charlson_quali2+ADL6_quali2+
Antibiothérapie.initiale, family = "binomial", data=bdd_reg[ind,])$coefficients
},
warning=function(w){
my_env$fit = 0
},
finally = {
c(fit)
})
}
reg_boot = boot(bdd_reg,func,R=9999)
boot_coef<-as.data.frame(reg_boot$t)
boot_coef
boot_coef<-filter(boot_coef, V1!=0)
boot_coef
colnames(boot_coef)<-c("Intercept", "Age..ans.", "sexe.0.f.1.h", "eosinopenie_pnn", "charlson_quali2", "ADL6_quali2",
"Antibiothérapie.initiale")
summary(boot_coef)
ic<-as.data.frame(t(as.data.frame(apply(boot_coef, 2, quantile, probs = seq(0,1,0.025)))))
ic<-select(ic, "2.5%", "97.5%")
ic<-as.data.frame(apply(ic, 2, exp))
boot_coef_mean<-as.data.frame(apply(boot_coef, 2, mean))
boot_coef_mean
res_fin<-as.data.frame(apply(boot_coef_mean, 1, exp))
# res_fin<-cbind(res_fin, ic)
View(res_fin)
#### Test IC
func_ic = function(Data,ind){
my_env<-environment()
fit = glm(décès..0.1.~Age..ans.+sexe.0.f.1.h+eosinopenie_pnn+charlson_quali2+ADL6_quali2+
Antibiothérapie.initiale, family = "binomial", data=bdd_reg[ind,])
c(exp(confint(fit)))
}
reg_ic = boot(bdd_reg,func_ic,R=9999)
#### Test IC
func_ic = function(Data,ind){
my_env<-environment()
fit = glm(décès..0.1.~Age..ans.+sexe.0.f.1.h+eosinopenie_pnn+charlson_quali2+ADL6_quali2+
Antibiothérapie.initiale, family = "binomial", data=bdd_reg[ind,])
c(exp(confint(fit)))
}
reg_ic = boot(bdd_reg,func_ic,R=99)
reg_ic
reg_ic$t
apply(reg_ic$t, 2, mean)
boot.ci(reg_boot, type = "perc")
View(boot_coef_mean)
View(ic)
boot.ci(reg_boot$t, type = "perc")
boot.ci(reg_boot$t0, type = "perc")
reg_boot$t0
exp(0.01704291)
exp(2.31255703)
View(boot_coef_mean)
?boot
summary(reg)
?boot.ci
boot.ci(reg_boot, t0=reg_boot$t0[1], t=reg_boot$t[,1])
boot.ci(reg_boot, t0=reg_boot$t0[1], t=reg_boot$t[,1], type="perc")
boot.ci(reg_boot, t0=reg_boot$t0[2], t=reg_boot$t[,2], type="perc")
View(ic)
boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="perc")
View(boot_coef)
exp(0.722)
View(ic)
exp(5)
reg_boot = boot(bdd_reg,func,R=999)
boot_coef<-as.data.frame(reg_boot$t)
boot_coef
boot_coef<-filter(boot_coef, V1!=0)
boot_coef
colnames(boot_coef)<-c("Intercept", "Age..ans.", "sexe.0.f.1.h", "eosinopenie_pnn", "charlson_quali2", "ADL6_quali2",
"Antibiothérapie.initiale")
summary(boot_coef)
ic<-as.data.frame(t(as.data.frame(apply(boot_coef, 2, quantile, probs = seq(0,1,0.025)))))
ic<-select(ic, "2.5%", "97.5%")
ic<-as.data.frame(apply(ic, 2, exp))
boot_coef_mean<-as.data.frame(apply(boot_coef, 2, mean))
boot_coef_mean
res_fin<-as.data.frame(apply(boot_coef_mean, 1, exp))
View(res_fin)
View(ic)
boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="perc")
boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="basic")
exp(3.884)
exp(confint(reg))
ic_eo<-boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="basic")
ic_eo$basic
ic_eo$R
ic_eo$t0
ic_eo$call
ic_eo<-boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="norm")
ic_eo
reg_boot$t0[4]
ic_eo<-boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="norm")
exp(ic_eo$normal)
ic_eo<-boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="basic")
exp(ic_eo$normal)
exp(ic_eo$basic)
a<-exp(ic_eo$basic)
View(a)
a$V7
a[,4]
for (i in 1:ncol(boot_coef))
{
ic_eo<-boot.ci(reg_boot, t0=reg_boot$t0[i], t=reg_boot$t[,i], type="basic")
ic_eo<-exp(ic_eo)
res_fin<-rbdin(res_fin, ic_eo[,4], ic_eo[,5])
}
res_fin<-as.data.frame(apply(boot_coef_mean, 1, exp))
for (i in 1:ncol(boot_coef))
{
ic_eo<-boot.ci(reg_boot, t0=reg_boot$t0[i], t=reg_boot$t[,i], type="basic")
ic_eo<-exp(ic_eo$basic)
res_fin<-rbdin(res_fin, ic_eo[,4], ic_eo[,5])
}
res_fin<-as.data.frame(apply(boot_coef_mean, 1, exp))
for (i in 1:ncol(boot_coef))
{
ic_eo<-boot.ci(reg_boot, t0=reg_boot$t0[i], t=reg_boot$t[,i], type="basic")
ic_eo<-exp(ic_eo$basic)
res_fin<-rbind(res_fin, ic_eo[,4], ic_eo[,5])
}
View(res_fin)
res_fin<-as.data.frame(apply(boot_coef_mean, 1, exp))
for (i in 1:ncol(boot_coef))
{
ic_eo<-boot.ci(reg_boot, t0=reg_boot$t0[i], t=reg_boot$t[,i], type="basic")
ic_eo<-exp(ic_eo$basic)
res_fin<-cbind(res_fin, ic_eo[,4], ic_eo[,5])
}
View(res_fin)
res_fin<-as.data.frame(apply(boot_coef_mean, 1, exp))
res_fin$ic_inf<-NA
res_fin$ic_sup<-NA
for (i in 1:ncol(boot_coef))
{
ic_eo<-boot.ci(reg_boot, t0=reg_boot$t0[i], t=reg_boot$t[,i], type="basic")
ic_eo<-exp(ic_eo$basic)
res_fin[i, "ic_inf"]<-ic_eo[,4]
res_fin[i, "ic_sup"]<-ic_eo[,5]
}
View(res_fin)
colnames(res_fin)[1]<-"OR"
View(res_fin)
exp(confint(reg))
confint(reg)
boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="basic")
boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="norm")
exp(-1.895)
ic<-as.data.frame(t(as.data.frame(apply(boot_coef, 2, quantile, probs = seq(0,1,0.025)))))
ic<-select(ic, "2.5%", "97.5%")
ic<-as.data.frame(apply(ic, 2, exp))
boot_coef_mean<-as.data.frame(apply(boot_coef, 2, mean))
boot_coef_mean
res_fin<-as.data.frame(apply(boot_coef_mean, 1, exp))
res_fin<-cbind(res_fin, ic)
View(res_fin)
boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="bca")
exp(0)
exp(4)
boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="percent")
boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="normal")
boot.ci(reg_boot, t0=reg_boot$t0[4], t=reg_boot$t[,4], type="basic")
?cor.test
install.packages("gtsummary")
library(gtsummary)
resg %>% tbl_regression(exponentiate = T)
reg %>% tbl_regression(exponentiate = T)
library(doudpackage)
### Analyse unvariee ###
ana_biv<-ft_ana_biv(bdd_subset, "décès..0.1.")
#Choix sur <=5
bdd_subset$PNE_quali<-as.factor(ifelse(bdd_subset$PNE.Min<0.04, 1, ifelse(is.na(bdd_subset$PNE.Min), NA, 0))
)
#Choix sur <=5
bdd_subset$PNE_quali<-as.factor(ifelse(bdd_subset$PNE.Min<0.04, 1, ifelse(is.na(bdd_subset$PNE.Min), NA, 0)))
bdd_subset$PNE_quali<-as.factor(ifelse(bdd_subset$PNE.Min<0.04, 1, ifelse(is.na(bdd_subset$PNE.Min), NA, 0)))
bdd_subset$ADL6<-as.numeric(as.character(bdd_subset$ADL6))
### Analyse unvariee ###
ana_biv<-ft_ana_biv(bdd_subset, "décès..0.1.")
## Regression ###
colnames(bdd_subset)
View(ana_biv)
summary(bdd_subset$PNE_quali)
bdd_subset$eosinopenie_pnn<-as.factor(ifelse(bdd_subset$PNE.Min < 0.04 & bdd_subset$PNN.MAX > 7, 1,
ifelse(is.na(bdd_subset$PNN.MAX)|is.na(bdd_subset$PNE.Min), NA, 0)))
summary(bdd_subset$eosinopenie_pnn)
### Analyse unvariee ###
ana_biv<-ft_ana_biv(bdd_subset, "décès..0.1.")
help(package=="doudpackage")
?help
help(package==doudpackage)
help(package="doudpackage")
### Analyse univariee ###
uni<-ft_desc_tab(bdd)
warnings()
View(uni)
setwd("/Users/Tiago/Desktop/BF is cool/Jill")
library(doudpackage)
library(tidyverse)
library(lubridate)
bdd<-read.csv2("bdd_jill.csv")
summary(bdd)
for (i  in 1:ncol(bdd)){
if(is.character(bdd[,i])){
print(paste("to factor: ", colnames(bdd)[i]))
bdd[,i]<-as.factor(bdd[,i])}
if (nlevels(bdd[,i]) >= 30){
print(paste("to Date: ", colnames(bdd)[i]))
bdd[,i]<-as.Date(bdd[,i], "%d/%m/%Y")}
if (is.numeric(bdd[,i]) && mean(bdd[,i], na.rm = TRUE) <= 3)
{
print(paste("to factor: ", colnames(bdd)[i]))
bdd[,i]<-as.factor(as.character(bdd[,i]))
}
}
summary(bdd)
levels(bdd$BPCO)[levels(bdd$BPCO)=="?"]<-NA
levels(bdd$BPCO)[levels(bdd$BPCO)==""]<-NA
levels(bdd$Alcool..0.1.)[levels(bdd$Alcool..0.1.)=="?"]<-NA
levels(bdd$Tabac..PA.)[levels(bdd$Tabac..PA.)==""]<-NA
levels(bdd$Tabac..PA.)[levels(bdd$Tabac..PA.)=="?"]<-NA
levels(bdd$Anosmie..0.1.)[levels(bdd$Anosmie..0.1.)=="?"]<-NA
levels(bdd$Agueusie..0.1.)[levels(bdd$Agueusie..0.1.)=="?"]<-NA
colnames(bdd)
bdd_subset<-select(bdd, Date.d.entrée.UGA..JJ.MM.AA., Date.sortie.UGA..JJ.MM.AA., Age..ans., sexe.0.f.1.h,
Prov.autre.service..type.service.SAU..etc..., Alcool..0.1., Tabac..PA., Chutes.répétition...0.1., Poids..Kg.,
IMC, Charlson.pondéré, ADL6, institution..0.1., Nbe.total.de.molécules, Nosocomial..0.1.,
Type.imagerie..TDM..0.Radio.1., Anomalie.imagerie..0.1., ACFA.parox...0.1., SCA..0.1., OAP..0.1.,
T.vigilance..Glagow...14...0.1., MTEV..0.1.,  Hémorragie..0.1., Transfusion..0.1.,
IRénaleA..0.1., "Fécalome..0.1.", Escarre..0.1., Globe..0.1.,
qSOFA.Max, Antibiothérapie.initiale, Leuco.MAX, Leuco.min, PNN.MAX, PNN.min,
PNE.Max, PNE.Min, Lympho.Max, Lympho.Min, Hb.MAX, Hb.min,
Plqt.MAX, Plqt.min, Cytolyse..0.1., Cholestase..0.1.,
DMS.UGA.covid, décès..0.1., RAD, SSR, Autre..hors.décès.)
summary(bdd_subset)
bdd_subset$ADL6<-as.character(bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("0,5", "0.5", bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("0;5", "0.5", bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("1,5", "1.5", bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("2,5", "2.5", bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("3,5", "3.5", bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("4,5", "4.5", bdd_subset$ADL6)
bdd_subset$ADL6<-gsub("5,5", "5.5", bdd_subset$ADL6)
bdd_subset$ADL6<-as.factor(bdd_subset$ADL6)
levels(bdd_subset$ADL6)[1]<-NA
summary(bdd_subset$ADL6)
bdd_subset$Tabac..PA.<-as.numeric(bdd_subset$Tabac..PA.)
bdd_subset$Prov.autre.service..type.service.SAU..etc...<-as.factor(bdd_subset$Prov.autre.service..type.service.SAU..etc...)
summary(bdd_subset)
## A preciser en commentaire que j ai considere les vides commes 0 ###
levels(bdd_subset$Antibiothérapie.initiale)[1]<-0
bdd_subset$Antibiothérapie.initiale<-as.character(bdd_subset$Antibiothérapie.initiale)
bdd_subset$Antibiothérapie.initiale<-ifelse(bdd_subset$Antibiothérapie.initiale!="0", "1", bdd_subset$Antibiothérapie.initiale)
bdd_subset$Antibiothérapie.initiale<-as.factor(bdd_subset$Antibiothérapie.initiale)
bdd_subset$devenir<-as.factor(ifelse(bdd_subset$décès..0.1.==1, 1,
ifelse(bdd_subset$RAD==1, 1,
ifelse(bdd_subset$SSR==1, 1, as.character(bdd_subset$Autre..hors.décès.)))))
for (i in 1:ncol(bdd_subset))
{
if (is.factor(bdd_subset[,i]))
print(paste(colnames(bdd_subset)[i], "facteur i= ", i))
else if (is.numeric(bdd_subset[,i]))
print(paste(colnames(bdd_subset)[i], "numeric i= ", i))
else
print(paste(colnames(bdd_subset)[i], "a determiner i= ", i))
}
bdd_subset$PNE.Max<-as.numeric(as.character(bdd_subset$PNE.Max))
bdd_subset$PNE.Min<-as.numeric(as.character(bdd_subset$PNE.Min))
bdd_subset$Lympho.Max<-as.numeric(as.character(bdd_subset$Lympho.Max))
bdd_subset$Lympho.Min<-as.numeric(as.character(bdd_subset$Lympho.Min))
summary(bdd_subset$PNE.Min)
summary(bdd_subset$PNE.Max)
table(bdd_subset$PNE.Min<0.2)
summary(bdd_subset$Leuco.MAX)
summary(bdd_subset$Lympho.Min)
summary(bdd_subset$PNN.MAX)
bdd_subset$eosinopenie_pnn.1<-as.factor(ifelse(bdd_subset$PNE.Min < 0.5 & bdd_subset$PNN.MAX > 7, 1,
ifelse(is.na(bdd_subset$PNN.MAX)|is.na(bdd_subset$PNE.Min), NA, 0)))
bdd_subset$eosinopenie_pnn.2<-as.factor(ifelse(bdd_subset$PNE.Min < 0.04 & bdd_subset$PNN.MAX > 7, 1,
ifelse(is.na(bdd_subset$PNN.MAX)|is.na(bdd_subset$PNE.Min), NA, 0)))
bdd_subset$PNE_quali<-as.factor(ifelse(bdd_subset$PNE.Min<0.04, 1, ifelse(is.na(bdd_subset$PNE.Min), NA, 0)))
bdd_subset$ADL6<-as.numeric(as.character(bdd_subset$ADL6))
### Analyse univariee ###
uni<-ft_desc_tab(bdd)
View(uni)
### Analyse univariee ###
uni<-ft_desc_tab(bdd_subset)
View(uni)
### Analyse univariee ###
uni<-ft_desc_tab(bdd_subset, "décès.0..1.")
### Analyse univariee ###
uni<-ft_desc_tab(bdd_subset, "décès..0.1.")
### Analyse univariee ###
uni<-ft_desc_tab(bdd_subset, "décès..0.1.", digits.opt = 0)
setwd("/Users/Tiago/Desktop/BF\ is\ cool/nagisa")
source('./nagisa.R')
library(doudpackage)
test<-ft_univ_tab(bdd)
test<-ft_desc_tab(bdd)
View(test)
warning()
test<-ft_desc_tab(bdd)
warning()
warnings()
test<-ft_desc_tab(bdd)
warnings()
